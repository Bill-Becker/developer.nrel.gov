{
  "swaggerVersion": "1.2",
  "apiVersion": "0.3.0",
  "basePath": "<%= ENV["API_HOST"] || "http://10.10.40.2/api" %>/transportation-incentives-laws",
  "models": {
    "Metadata": {
      "id": "Metadata",
      "description": "The identifying metadata.",
      "required": ["version"],
      "properties": {
        "version": {
          "type": "string",
          "description": "This is the version of the api"
        },
        "count": {
          "type": "integer",
          "description": "If the request returns an array of results, this is the number of results returned in the array"
        }
      }
    },
    "Inputs": {
      "id": "Inputs",
      "description": "The parameters that were passed to the API"
    },
    "Law": {
      "id": "Law",
      "description": "This is a Law",
      "required": ["id", "state", "title", "text", "plaintext", "type", "categories", "types", "references", "topics"],
      "properties": {
        "id": {
          "type": "integer",
          "description": "The numeric id of the law"
        },
        "state": {
          "type": "string",
          "description": "The two letter code fo the state where the law is enacted ('US' for Federal laws and 'DC' for the District of Columbia)"
        },
        "title": {
          "type": "string",
          "description": "The title of the law"
        },
        "text": {
          "type": "string",
          "description": "The body of the law, html formatted"
        },
        "enacted_date": {
          "type": "datetime",
          "description": "The date that the law was enacted"
        },
        "amended_date": {
          "type": "datetime",
          "description": "The date that the law was amended"
        },
        "plaintext": {
          "type": "string",
          "description": "The text of the law without html formatting"
        },
        "is_recent": {
          "type": "boolean",
          "description": "Whether or not the law has been added or changed recently"
        },
        "seq_num": {
          "type": "integer",
          "description": "sequence number"
        },
        "type": {
          "type": "string",
          "description": "The title of the first type from the types attribute"
        },
        "agency": {
          "type": "string",
          "description": "The agency associated with the law or incentive."
        },
        "significant_update_date": {
          "type": "datetime",
          "description": "When the last significant update ot the law was made"
        },
        "recent_update_or_new": {
          "type": "string",
          "description": "An indicator if the last significant update was an update or the laws creation."
        },
        "contacts": {
          "type": "array",
          "description": "The contacts for the given law, returned only if the parameter poc is true",
          "items": {
            "$ref": "Poc"
          }
        },
        "categories": {
          "type": "array",
          "description": "The various law categories that apply to this law",
          "items": {
            "$ref": "Category"
          }
        },
        "types": {
          "type": "array",
          "description": "The types that apply to this law",
          "items":{
            "$ref": "LawType"
          }
        },
        "references": {
          "type": "array",
          "description": "Any external references cited in the body of the law",
          "items": {
            "$ref": "LawReference"
          }
        },
        "topics": {
          "type": "array",
          "description": "The topics that the law coveres",
          "items": {
            "$ref": "LawTopics"
          }
        }
      }
    },
    "Poc": {
      "id": "Poc",
      "required": ["name", "state"],
      "properties": {
        "title": {
          "type": "string",
          "description": "The job title of the contact"
        },
        "name": {
          "type": "string",
          "description": "The name of the contact"
        },
        "state": {
          "type": "string",
          "description": "The two letter code fo the state where the contact is based ('US' for Federal laws and 'DC' for the District of Columbia)"
        },
        "agency": {
          "type": "string",
          "description": "The agency that the contact represents"
        },
        "web_page": {
          "type": "string",
          "description": "The contacts webpage"
        },
        "telephone": {
          "type": "string",
          "description": "The contacts phone number"
        },
        "fax": {
          "type": "string",
          "description": "The contacts fax number"
        },
        "email": {
          "type": "string",
          "description": "The contacts email address"
        }
      }
    },
    "Category": {
      "id": "Category",
      "description": "A category that the law applies to",
      "required": ["code", "title", "category_type"],
      "properties": {
        "code": {
          "type": "string",
          "description": "The code used to identify the category"
        },
        "title": {
          "type": "string",
          "description": "The full name of the category"
        },
        "category_type": {
          "type": "string",
          "description": "The type of category. (E.g. tech, incentive, regulation, user)"
        }
      }
    },
    "LawType": {
      "id": "LawType",
      "description": "This is a high level law type",
      "required": ["id", "title", "code"],
      "properties": {
        "id": {
          "type": "integer",
          "description": "The id of the law type"
        },
        "title": {
          "type": "string",
          "description": "The name of the law type"
        },
        "code": {
          "type": "string",
          "description": "The code used to identify the law type"
        }
      }
    },
    "LawReference": {
      "id": "LawReference",
      "description": "External references cited in the text of the law",
      "required": ["description", "url"],
      "properties": {
        "description": {
          "type": "string",
          "description": "The context of the reference"
        },
        "url": {
          "type": "string",
          "description": "The url linking to the reference."
        }
      }
    },
    "LawTopics": {
      "id": "LawTopics",
      "description": "The general topic of the law",
      "required": ["id", "title", "sort_order"],
      "properties": {
        "id": {
          "type": "integer",
          "description": "The database id of the law topic"
        },
        "title": {
          "type": "string",
          "description": "The name of the law topic"
        },
        "sort_order": {
          "type": "integer",
          "description": "The sort order of the law topic"
        }
      }
    },
    "LawsResponse": {
      "id": "LawsResponse",
      "required": ["metadata", "inputs", "result"],
      "properties": {
        "metadata": {
          "type": "Metadata",
          "description": "The api version number, and the count of laws returned"
        },
        "inputs": {
          "type": "Inputs",
          "description": "The parameters that were passed to the api call"
        },
        "result": {
          "description": "The array of laws returned",
          "type": "array",
          "items": {
            "$ref": "Law"
          }
        }
      }
    },
    "LawResult": {
      "id": "LawResult",
      "required": ["metadata", "inputs", "result"],
      "properties": {
        "metadata": {
          "type": "Metadata",
          "description": "The api version number"
        },
        "inputs": {
          "type": "Inputs",
          "description": "The parameters that were passed to the api call"
        },
        "result": {
          "description": "The law requested",
          "type": "Law"
        }
      }
    },
    "PocResults": {
      "id": "PocResults",
      "required": ["metadata", "inputs", "result"],
      "properties": {
        "metadata": {
          "type": "Metadata",
          "description": "The api version number, and the count of contacts returned"
        },
        "inputs": {
          "type": "Inputs",
          "description": "The parameters that were passed to the api call"
        },
        "result": {
          "description": "The array of Points of Contacts for the state requested",
          "type": "array",
          "items": {
            "$ref": "Poc"
          }
        }
      }
    },
    "FullCategory": {
      "id": "FullCategory",
      "required": ["code", "title", "category_type", "sort_order"],
      "properties": {
        "code": {
          "type": "string",
          "description": "The code used to identify the category"
        },
        "title": {
          "type": "string",
          "description": "The full name of the category"
        },
        "category_type": {
          "type": "string",
          "description": "The type of category. (E.g. tech, incentive, regulation, user)"
        },
        "sort_order": {
          "type": "string",
          "description": "The sort order for the categories"
        },
        "help_text": {
          "type": "string",
          "description": "A short description of what the law category encompasses"
        }
      }
    },
    "CategoryResults": {
      "id": "CategoryResults",
      "required": ["metadata", "inputs", "result"],
      "properties": {
        "metadata": {
          "type": "Metadata",
          "description": "The api version number, and the count of categories returned"
        },
        "inputs": {
          "type": "Inputs",
          "description": "The parameters that were passed to the api call"
        },
        "result": {
          "description": "The array of law categories returned",
          "type": "array",
          "items": {
            "$ref": "FullCategory"
          }
        }
      }
    }
  },
  "apis": [
    {
      "path":"/v1.{output_format}",
      "description": "Get the list of laws and incentives",
      "operations": [
        {
          "method": "GET",
          "nickname": "transportation-incentives-laws",
          "summary": "search the laws and incentives database",
          "type": "LawsResponse",
          "parameters": [
            {
              "name": "output_format",
              "description": "Response format",
              "paramType": "path",
              "required": true,
              "dataType": "string",
              "enum": ["json", "xml", "csv"],
              "defaultValue": "json"
            },
            {
              "name": "api_key",
              "description": "API Key",
              "paramType": "query",
              "required": true,
              "dataType": "string",
              "defaultValue": "DEMO_KEY"
            },
            {
              "name": "limit",
              "description": "Limit the number of laws returned",
              "paramType": "query",
              "dataType": "integer",
              "defaultValue": "10"
            },
            {
              "name": "jurisdiction",
              "description": "Return laws for the given Jurisdiction. Jurisdiction must be given as a two character state code (eg, 'CO' for Colorado). A single jurisdiction, or a comma-separate list of multiple jurisdiction, may be given.  Use the code 'US' for federal laws and the code 'DC' for Washington D.C.",
              "dataType": "string",
              "paramType": "query"
            },
            {
              "name": "technology",
              "description": "Search by the technology type. A single type, or a comma-separate list of multiple types, may be given. Values and what they stand for are as follows: 'BIOD' for Biodiesel, 'ETH' for Ethanol, 'NG' for Natural Gas, 'LPG' for Propane (LPG), 'HY' for Hydrogen Fuel Cells, 'EFFEC' for Fuel Economy / Efficiency, 'IR' for Idle Reduction, 'ELEC' for EVs, 'HEV' for HEVs / PHEVs, 'OTHER' for Other, 'AFTMKTCONV' for Aftermarket Conversions, and 'NEVS' for NEVs",
              "dataType": "string",
              "paramType": "query"
            },
            {
              "name": "incentive_type",
              "description": "Search by the incentive type. A single type, or a comma-separate list of multiple types, may be given. Values and what they stand for are as follows: 'GNT' for Grants, 'TAX' for Tax Incentives, 'LOANS' for Loans and Leases, 'RBATE' for Rebates, 'EXEM' for Exemptions, and 'OTHER' for Other.",
              "dataType": "string",
              "paramType": "query"
            },
            {
              "name": "regulation_type",
              "description": "Search by the regulation type. A single type, or a comma-separate list of multiple types, may be given. Values and what they stand for are as follows: 'REGIS' for Registration / Licensing, 'STD' for Fuel Production / Quality, 'DREST' for Driving / Idling, 'REQ' for Acquisition / Fuel Use, 'FUEL' for Fuel Taxes, 'RFS' for Renewable Fuel Standard / Mandate, 'OTHER' for Other, 'AIRQEMISSIONS' for Air Quality / Emissions, and 'CCEINIT' for Climate Change / Energy Initiatives",
              "dataType": "string",
              "paramType": "query"
            },
            {
              "name": "user_type",
              "description": "Search by the user type. A single type, or a comma-separate list of multiple types, may be given. Values and what they stand for are as follows: 'IND' for Vehicle Owner/Driver, 'FLEET' for Fleet Purchaser/Manager, 'STATION' for Fueling / TSE Infrastructure Owner, 'AFP' for Alternative Fuel Producer, 'AFS' for Alternative Fuel Dealer, 'PURCH' for Alternative Fuel Purchaser, 'MAN' for AFV Manufacturer/Retrofitter, and 'OTHER' for Other",
              "dataType": "string",
              "paramType": "query"
            },
            {
              "name": "poc",
              "description": "Include points of contacts in the return value.",
              "dataType": "boolean",
              "defaultValue": false,
              "paramType": "query"
            },
            {
              "name": "recent",
              "description": "Return only recently added or updated laws and incentives",
              "dataType": "boolean",
              "defaultValue": false,
              "paramType": "query"
            },
            {
              "name": "expired",
              "description": "Show only expired, repealed or archived laws and incentives.",
              "dataType": "boolean",
              "defaultValue": false,
              "paramType": "query"
            },
            {
              "name": "law_type",
              "description": "Search by the law type. A single type, or a comma-separate list of multiple types, may be given. Values are as follows: 'STATEINC' for State Incentives, 'UPINC ' for Utility/Private Incentives, 'LAWREG' for Laws and Regulations, 'INC' for Incentives, 'PROG' for Programs, 'LUP' for Last Updated, 'OVIEW' for Overview, and 'HILITE' for Highlights",
              "dataType": "string",
              "paramType": "query"
            },
            {
              "name": "keyword",
              "description": "Search laws by keyword in title or text.",
              "dataType": "string",
              "paramType": "query"
            },
            {
              "name": "local",
              "description": "Show only local examples of laws and incentives.",
              "dataType": "boolean",
              "defaultValue": false,
              "paramType": "query"
            }
          ]
        }
      ]
    },
    {
      "path":"/v1/{id}.{output_format}",
      "description": "Get a specific law by id",
      "operations": [
        {
          "method": "GET",
          "nickname": "transportation-incentives-laws",
          "summary": "Get a specific law by id",
          "type": "LawResult",
          "parameters": [
            {
              "name": "output_format",
              "description": "Response format",
              "paramType": "path",
              "required": true,
              "dataType": "string",
              "enum": ["json", "xml"],
              "defaultValue": "json"
            },
            {
              "name": "api_key",
              "description": "API Key",
              "paramType": "query",
              "required": true,
              "dataType": "string",
              "defaultValue": "DEMO_KEY"
            },
            {
              "name": "id",
              "description": "The id of the law that you are searching",
              "paramType": "path",
              "required": true,
              "dataType": "integer"
            },
            {
              "name": "poc",
              "description": "Include points of contacts in the return value.",
              "dataType": "boolean",
              "defaultValue": false,
              "paramType": "query"
            }
          ]
        }
      ]
    },
    {
      "path":"/v1/pocs.{output_format}",
      "description": "Get the points of contact for a given jurisdiction",
      "operations": [
        {
          "method": "GET",
          "nickname": "transportation-incentives-laws",
          "summary": "Get the points of contact for a given jurisdiction",
          "type": "PocResults",
          "parameters": [
            {
              "name": "output_format",
              "description": "Response format",
              "paramType": "path",
              "required": true,
              "dataType": "string",
              "enum": ["json", "xml"],
              "defaultValue": "json"
            },
            {
              "name": "api_key",
              "description": "API Key",
              "paramType": "query",
              "required": true,
              "dataType": "string",
              "defaultValue": "DEMO_KEY"
            },
            {
              "name": "jurisdiction",
              "description": "Return the points of contact for the given Jurisdiction. Jurisdiction must be given as a two character state code (eg, 'CO' for Colorado). A single jurisdiction, or a comma-separate list of multiple jurisdiction, may be given.  Use the code 'US' for federal laws and the code 'DC' for Washington D.C.",
              "dataType": "string",
              "required": true,
              "paramType": "query"
            }
          ]
        }
      ]
    },
    {
      "path":"/v1/category-list.{output_format}",
      "description": "Get the law categories of a given type",
      "operations": [
        {
          "method": "GET",
          "nickname": "transportation-incentives-laws",
          "summary": "Get the law categories of a given type",
          "type": "CategoryResults",
          "parameters": [
            {
              "name": "output_format",
              "description": "Response format",
              "paramType": "path",
              "required": true,
              "dataType": "string",
              "enum": ["json", "xml"],
              "defaultValue": "json"
            },
            {
              "name": "api_key",
              "description": "API Key",
              "paramType": "query",
              "required": true,
              "dataType": "string",
              "defaultValue": "DEMO_KEY"
            },
            {
              "name": "type",
              "description": "Search by the category type.",
              "enum": ["tech", "user", "regulation", "incentive"],
              "dataType": "string",
              "paramType": "query"
            }
          ]
        }
      ]
    }
  ]
 }
    